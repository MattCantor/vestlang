"use strict";(self.webpackChunk_vestlang_docs=self.webpackChunk_vestlang_docs||[]).push([[978],{6336:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>l});var t=s(9430);const r={},i=t.createContext(r);function d(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(i.Provider,{value:n},e.children)}},6354:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"dsl_grammar","title":"DSL Grammar","description":"The DSL uses the following grammar. All keywords are case-insensitive.","source":"@site/docs/dsl_grammar.md","sourceDirName":".","slug":"/dsl_grammar","permalink":"/vestlang/dsl_grammar","draft":false,"unlisted":false,"editUrl":"https://github.com/MattCantor/vestlang/docs/dsl_grammar.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"DSL Grammar","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/vestlang/"},"next":{"title":"Abstract Syntax Tree","permalink":"/vestlang/ast"}}');var r=s(5270),i=s(6336);const d={title:"DSL Grammar",sidebar_position:1},l=void 0,o={},c=[{value:"Schedule Expressions",id:"schedule-expressions",level:3},{value:"Singleton <code>&lt;schedule-expr&gt;</code>",id:"singleton-schedule-expr",level:4},{value:"Selector over <code>schedule-expr</code>",id:"selector-over-schedule-expr",level:4},{value:"Vesting Expressions",id:"vesting-expressions",level:3},{value:"Singleton <code>&lt;vest-expr&gt;</code>",id:"singleton-vest-expr",level:4},{value:"Selector over <code>&lt;vest-expr&gt;</code>",id:"selector-over-vest-expr",level:4},{value:"Conditions",id:"conditions",level:3},{value:"Duration",id:"duration",level:3},{value:"Amount",id:"amount",level:3}];function a(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"The DSL uses the following grammar. All keywords are case-insensitive."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[< amount > ] <schedule-expr>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"schedule-expressions",children:"Schedule Expressions"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.code,{children:"<schedule-expr>"})," is either a singleton, or a selector over ",(0,r.jsx)(n.code,{children:"<schedule-expr>"}),"s."]}),"\n",(0,r.jsxs)(n.h4,{id:"singleton-schedule-expr",children:["Singleton ",(0,r.jsx)(n.code,{children:"<schedule-expr>"})]}),"\n",(0,r.jsx)(n.p,{children:"A singleton schedule encodes the fundamental ingredients of a vesting schedule, namely the vesting start, the number of installments, the cadence of installments, and an optional cliff."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"VEST\n    [ FROM <vesting-expr> [ OVER <duration> EVERY <duration> ] ]\n    [ CLIFF <vesting-expr> ]\n"})}),"\n",(0,r.jsxs)(n.h4,{id:"selector-over-schedule-expr",children:["Selector over ",(0,r.jsx)(n.code,{children:"schedule-expr"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"( EARLIER OF | LATER OF ) (\n    <schedule-expr>,\n    <schedule-expr>\n    [, <schedule-expr>...]\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"vesting-expressions",children:"Vesting Expressions"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.code,{children:"<vesting-expr>"})," is either a singleton, or a selector over ",(0,r.jsx)(n.code,{children:"<vesting-expr"}),"s:"]}),"\n",(0,r.jsxs)(n.h4,{id:"singleton-vest-expr",children:["Singleton ",(0,r.jsx)(n.code,{children:"<vest-expr>"})]}),"\n",(0,r.jsxs)(n.p,{children:["A singleton ",(0,r.jsx)(n.code,{children:"<vesting-expr>"})," is a date literal or an event, with one or more optional ",(0,r.jsx)(n.code,{children:"<condition>"}),"s."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"( DATE <iso> | EVENT <string> ) [ <condition>... ]\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Node"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Pattern"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Date"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:'([0-9][0-9][0-9] "-" [0-1][0-9] "-" [0-3][0-9]) '})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Event"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"([A-Za-z\\_][A-Za-z0-9_]\\*)"})})]})]})]}),"\n",(0,r.jsxs)(n.h4,{id:"selector-over-vest-expr",children:["Selector over ",(0,r.jsx)(n.code,{children:"<vest-expr>"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"( EARLIER OF | LATER OF ) (\n    <vesting-expr>,\n    <vesting-expr>\n    [, <vesting-expr>...]\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"conditions",children:"Conditions"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.code,{children:"<condition>"})," allows one vesting date/event to act as a gate for another, and are used by the ",(0,r.jsx)(n.a,{href:"/vestlang/evaluation",children:"evaluator"})," to determine whether vesting installments are ",(0,r.jsx)(n.code,{children:"resolved"}),", ",(0,r.jsx)(n.code,{children:"unresolved"}),", or ",(0,r.jsx)(n.code,{children:"impossible"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Conditions are described as a ",(0,r.jsx)(n.code,{children:"<duration>"})," which either precedes or follows a singleton ",(0,r.jsx)(n.code,{children:"<vesting-expr>"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[ ( BEFORE | AFTER )\n( DATE <iso> | EVENT <string> ) [ ( + | - ) <duration> ] ]\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"<condition>"}),"s may be chained with ",(0,r.jsx)(n.code,{children:"AND"})," and ",(0,r.jsx)(n.code,{children:"OR"})," operators..."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\n<condition> AND <condition> OR <condition>\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"...or grouped with parentheses."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\n(AND | OR) (\n<condition>,\n<condition>,\n[, condition...]\n)\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"duration",children:"Duration"}),"\n",(0,r.jsx)(n.p,{children:"A duration is given by the following:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\n<number> (year|years|month|months|week|weeks|day|days)\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"amount",children:"Amount"}),"\n",(0,r.jsxs)(n.p,{children:["An ",(0,r.jsx)(n.code,{children:"<amount>"})," may be provided with a decimal, indicating a portion between 0 and 1 inclusive..."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:".5 VEST\n  OVER 48 months EVERY 1 months\n"})}),"\n",(0,r.jsx)(n.p,{children:"...as a fraction, indicating a portion of the total quantity applicable to the security..."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-vest",children:"1/2 VEST\n  OVER 48 months EVERY 1 months\n"})}),"\n",(0,r.jsx)(n.p,{children:"...or as an interger, indicating an absolute number of shares."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-vest",children:"100 VEST\n  OVER 48 months EVERY 1 months\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);